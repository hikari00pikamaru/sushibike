<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>今通った寿司なーんだ？</title>

  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      background: #000;
      color: #fff;
    }

    #gameArea {
      position: relative;
      width: 100%;
      max-width: 700px;
      height: 220px;
      margin: 20px auto;
      background: #111;
      border: 2px solid #444;
      overflow: hidden;
    }

    #bike {
      position: absolute;
      top: 90px;
      right: -300px;
      display: flex;
      align-items: center;
      gap: 10px;
      visibility: hidden;
    }

    #bike img {
      image-rendering: pixelated;
    }

    #sushi {
      width: 80px;
      height: auto;
    }

    #bikeImg {
      width: 120px;
      height: auto;
    }

    #choices button {
      margin: 6px;
      padding: 10px 18px;
      font-size: 16px;
      cursor: pointer;
    }

    #result {
      margin-top: 10px;
      font-weight: bold;
    }
  </style>
</head>

<body>

<h1>今通った寿司なーんだ？</h1>

<div id="gameArea">
  <div id="bike">
    <img id="sushi" src="" alt="寿司">
    <img id="bikeImg" src="バイク_01.png" alt="バイク">
  </div>
</div>

<div id="choices"></div>
<div id="result"></div>

<button onclick="startGame()">スタート</button>

<script>
  const sushiList = [
    { name: "うに", file: "うにのお寿司.png" },
    { name: "えび", file: "えびのお寿司.png" },
    { name: "かんぴょう巻き", file: "かんぴょう巻き.png" },
    { name: "たくあん巻き", file: "たくあん巻き.png" }
  ];

  let correctSushi = null;

  function startGame() {
    document.getElementById("result").textContent = "";
    document.getElementById("choices").innerHTML = "";

    correctSushi = sushiList[Math.floor(Math.random() * sushiList.length)];

    const bike = document.getElementById("bike");
    const sushiImg = document.getElementById("sushi");

    sushiImg.src = correctSushi.file;

    let position = -300;
    const speed = 35;
    const exitPosition = 900;
    const visibleStart = 250;
    const visibleEnd = 420;

    bike.style.right = position + "px";
    bike.style.visibility = "hidden";

    const interval = setInterval(() => {
      position += speed;
      bike.style.right = position + "px";

      if (position > visibleStart && position < visibleEnd) {
        bike.style.visibility = "visible";
      } else {
        bike.style.visibility = "hidden";
      }

      if (position > exitPosition) {
        clearInterval(interval);
        bike.style.visibility = "hidden";
        showChoices();
      }
    }, 50);
  }

  function showChoices() {
    const choicesDiv = document.getElementById("choices");

    sushiList.forEach(sushi => {
      const btn = document.createElement("button");
      btn.textContent = sushi.name;
      btn.onclick = () => checkAnswer(sushi.name);
      choicesDiv.appendChild(btn);
    });
  }

  function checkAnswer(answer) {
    const result = document.getElementById("result");

    if (answer === correctSushi.name) {
      result.textContent = "正解！";
    } else {
      result.textContent = "不正解！ 正解は「" + correctSushi.name + "」";
    }
  }
</script>

</body>
</html>
