<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>今通った寿司なーんだ？</title>

  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      background: #000;
      color: #fff;
    }

    #gameArea {
      position: relative;
      width: 100%;
      max-width: 700px;
      height: 220px;
      margin: 20px auto;
      background: #111;
      border: 2px solid #444;
      overflow: hidden;
    }

    /* 茶色の塀 */
    .wall {
      position: absolute;
      top: 0;
      width: 120px;
      height: 100%;
      background: linear-gradient(to bottom, #8b5a2b, #6f3f1a);
      z-index: 5;
    }
    .wall.left { left: 0; border-right: 3px solid #3b1f0b; }
    .wall.right { right: 0; border-left: 3px solid #3b1f0b; }

    /* 通過中のバイク */
    #bike {
      position: absolute;
      top: 90px;
      right: -350px;
      display: flex;
      align-items: center;
      gap: 10px;
      visibility: hidden;
      z-index: 3;
    }

    #bike img { image-rendering: pixelated; }
    #sushi { width: 80px; }
    #bikeImg { width: 120px; }

    /* 回答後のリプレイ表示 */
    #replay {
      display: none;
      margin-top: 15px;
    }

    #replayInner {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 12px;
      margin-bottom: 8px;
    }

    #replayInner img {
      image-rendering: pixelated;
    }

    #replaySushi { width: 80px; }
    #replayBike { width: 140px; }

    #message {
      font-size: 18px;
      font-weight: bold;
    }

    /* 選択肢 */
    #choices {
      display: flex;
      justify-content: center;
      gap: 12px;
      flex-wrap: wrap;
      margin-top: 10px;
    }

    .choiceBtn {
      background: #222;
      border: 2px solid #555;
      color: #fff;
      padding: 8px;
      width: 130px;
      cursor: pointer;
    }

    .choiceBtn img {
      width: 80px;
      display: block;
      margin: 0 auto 4px;
    }

    .choiceBtn:hover { border-color: #fff; }
  </style>
</head>

<body>

<h1>今通った寿司なーんだ？</h1>

<div id="gameArea">
  <div class="wall left"></div>
  <div class="wall right"></div>

  <div id="bike">
    <img id="sushi" src="" alt="寿司">
    <img id="bikeImg" src="バイク_01.png" alt="バイク">
  </div>
</div>

<div id="choices"></div>

<!-- 回答後表示 -->
<div id="replay">
  <div id="replayInner">
    <img id="replaySushi" src="" alt="寿司">
    <img id="replayBike" src="バイク_01.png" alt="バイク">
  </div>
  <div id="message"></div>
</div>

<button onclick="startGame()">スタート</button>

<script>
  const sushiList = [
    { name: "うに", file: "うにのお寿司.png" },
    { name: "えび", file: "えびのお寿司.png" },
    { name: "かんぴょう巻き", file: "かんぴょう巻き.png" },
    { name: "たくあん巻き", file: "たくあん巻き.png" }
  ];

  let correctSushi = null;

  function startGame() {
    document.getElementById("choices").innerHTML = "";
    document.getElementById("replay").style.display = "none";

    correctSushi = sushiList[Math.floor(Math.random() * sushiList.length)];

    const bike = document.getElementById("bike");
    const sushiImg = document.getElementById("sushi");
    sushiImg.src = correctSushi.file;

    let position = -350;
    const speed = 35;
    const exitPosition = 900;
    const visibleStart = 140;
    const visibleEnd = 440;

    bike.style.right = position + "px";
    bike.style.visibility = "hidden";

    const interval = setInterval(() => {
      position += speed;
      bike.style.right = position + "px";

      if (position > visibleStart && position < visibleEnd) {
        bike.style.visibility = "visible";
      } else {
        bike.style.visibility = "hidden";
      }

      if (position > exitPosition) {
        clearInterval(interval);
        bike.style.visibility = "hidden";
        showChoices();
      }
    }, 50);
  }

  function showChoices() {
    const choicesDiv = document.getElementById("choices");

    sushiList.forEach(sushi => {
      const btn = document.createElement("button");
      btn.className = "choiceBtn";
      btn.innerHTML = `
        <img src="${sushi.file}" alt="${sushi.name}">
        <div>${sushi.name}</div>
      `;
      btn.onclick = () => checkAnswer(sushi);
      choicesDiv.appendChild(btn);
    });
  }

  function checkAnswer(selectedSushi) {
    document.getElementById("choices").innerHTML = "";

    const replay = document.getElementById("replay");
    const replaySushi = document.getElementById("replaySushi");
    const message = document.getElementById("message");

    replaySushi.src = correctSushi.file;

    if (selectedSushi.name === correctSushi.name) {
      message.textContent = "ヘイ！お待ち！";
    } else {
      message.textContent = "この寿司は渡せねぇなぁ！";
    }

    replay.style.display = "block";
  }
</script>

</body>
</html>
